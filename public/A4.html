<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acta de Manifestación</title>
</head>
<body>
    <h3>Acta de Manifestación de Matrimonio</h3>
    <a href="" download="">Descargar Archivo</a>
    <object data="" type="" style="width:100%; height:calc(100vh - 3rem)"></object>

    <script>
        window.addEventListener("load", () => {
            console.log("Cargado");
            let theObj = { 
                "certificado": "A4", 
                "data": {
                    "codigo_solicitud": 5,
                    "codigo_tipo_solicitud": 10,
                    "estado": "INGRESADA",
                    "fecha_solicitud": "2022-03-14T13:00:00.000Z",
                    "tipo_solicitud": "MANIFESTACIÓN",
                    "nombre_oficina": "Providencia",
                    "nombre_comuna": "Providencia",
                    "nombre_region": "Region Metropolitana De Santiago",
                    "contrayentes": [
                        {
                            "codigo_contrayente": 3,
                            "tipo_identificacion": "r",
                            "numero_identificacion": "13296484",
                            "dv_numero_identificacion": "k",
                            "numero_documento": "U2FsdGVkX18e7M6UTgfBBhP5PN5JNh7LDA1FVKwF2ycMl",
                            "nombre": "ANDRÉS ALEJANDRO",
                            "apellido_uno": "AGUILERA",
                            "apellido_dos": "SANTANDER",
                            "pais_identificacion": "CHILE",
                            "nacionalidad": "CHILENA",
                            "genero": "MASCULINO",
                            "correo": "contrayente_uno@gmail.com",
                            "telefono": "56912346578",
                            "fecha_ingreso": "2022-02-26T15:52:19.000Z",
                            "calle_nombre": "ROSARIO NORTE",
                            "calle_numero": "410",
                            "calle_letra": "",
                            "resto_domicilio": "DEPTO. 186",
                            "codigo_postal": "",
                            "fecha_nacimiento": "1977-07-14",
                            "contrayente_consentimiento": [
                                {
                                    "codigo_contrayente_consentimiento": 11,
                                    "codigo_contrayente": 12,
                                    "codigo_solicitud": 18,
                                    "nombres": "JULIO",
                                    "apellido_uno": "GONZÁLEZ",
                                    "apellido_dos": "REBOLLEDO",
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "pais_identificacion": "VENEZUELA",
                                    "nacionalidad": "VENEZOLANA",
                                    "calidad_consentimiento": "HERMANO",
                                    "fecha_ingreso": "2022-03-03T15:30:04.000Z",
                                    "fecha_modificacion": "2022-03-03T15:30:04.000Z",
                                    "estado": 1
                                },
                                {
                                    "codigo_contrayente_consentimiento": 12,
                                    "codigo_contrayente": 12,
                                    "codigo_solicitud": 18,
                                    "nombres": "JULIO",
                                    "apellido_uno": "GONZÁLEZ",
                                    "apellido_dos": "VEGA",
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "pais_identificacion": "VENEZUELA",
                                    "nacionalidad": "VENEZOLANA",
                                    "calidad_consentimiento": "PADRE",
                                    "fecha_ingreso": "2022-03-03T15:30:04.000Z",
                                    "fecha_modificacion": "2022-03-03T15:30:04.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_estadistica": [
                                {
                                    "codigo_dato_estadistico": 3,
                                    "codigo_contrayente": 3,
                                    "nombre_calle": null,
                                    "numero_calle": null,
                                    "localidad": null,
                                    "codigo_comuna": null,
                                    "num_matrimonios_anteriores": 1,
                                    "causa_disolucion_ultimo_matrimonio": "DIVORCIO",
                                    "edad": 45,
                                    "ultimo_curso": null,
                                    "nivel": null,
                                    "ocupacion": "INGENIERO DE EJECUCIÓN EN INFORMÁTICA",
                                    "nivel_ocupacional": null,
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "fecha_modificacion": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                }
                            ],
                            "datos_contrayente_matrimonios": [
                                {
                                    "codigo_matrimonio_contrayente": 1,
                                    "codigo_contrayente": 3,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "13723865",
                                    "dv_numero_identificacion": "9",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "NICOL NOEMÍ",
                                    "apellido_uno": "OJEDA",
                                    "apellido_dos": "MIRANDA",
                                    "genero": "FEMENINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "estado_civil": "DIVORCIADO/A",
                                    "fecha_nacimiento": "1979-11-26",
                                    "fecha_matrimonio": null,
                                    "anio_matrimonio": "1999",
                                    "motivo": "DIVORCIO",
                                    "lugar_defuncion": "ANTOFAGASTA",
                                    "fecha_defuncion": "2010-01-12",
                                    "circunscripcion": "ANTOFAGASTA",
                                    "numero": "999",
                                    "registro": "RD",
                                    "tribunal": "JUZGADO DE FAMILIA 4 SANTIAGO ",
                                    "causa_rol": "C-1965-2018",
                                    "fecha_instancia_uno": "2018-05-03",
                                    "fecha_instancia_dos": null,
                                    "fecha_anulacion": null,
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_curadores": [
                                {
                                    "codigo_curador_contrayente": 1,
                                    "codigo_solicitud": 5,
                                    "codigo_contrayente": 3,
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "nombres": "CURADOR",
                                    "apellido_uno": "NÚMERO",
                                    "apellido_dos": "UNO",
                                    "condicion_curador": null,
                                    "fecha_ingreso": "2022-02-28T15:02:29.000Z",
                                    "fecha_modificacion": "2022-02-28T15:02:29.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_interpretes": [
                                {
                                    "codigo_interprete_contrayente": 1,
                                    "codigo_solicitud": 5,
                                    "codigo_contrayente": 3,
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "nombres": "ANGEL",
                                    "apellido_uno": "HENRIQUEZ",
                                    "apellido_dos": "POSADA",
                                    "calle_nombre": null,
                                    "calle_numero": null,
                                    "calle_letra": null,
                                    "calle_resto": null,
                                    "codigo_region": null,
                                    "codigo_comuna": null,
                                    "codigo_postal": null,
                                    "telefono": null,
                                    "correo": null,
                                    "tipo_interprete": "LENGUAJE DE SEÑAS",
                                    "fecha_ingreso": "2022-02-28T15:02:00.000Z",
                                    "fecha_modificacion": "2022-02-28T15:02:00.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_comuna": {
                                "nombre_comuna": "Las Condes"
                            },
                            "contrayente_region": {
                                "nombre_region": "Region Metropolitana De Santiago"
                            },
                            "padres": [
                                {
                                    "codigo_familiar_contrayente": 11,
                                    "codigo_contrayente": 3,
                                    "tipo_familiar": 1,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "7620418",
                                    "dv_numero_identificacion": "7",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "JORGE ANDRÉS",
                                    "apellido_uno": "AGUILERA",
                                    "apellido_dos": "AHUMADA",
                                    "genero": "MASCULINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "PROVIDENCIA",
                                    "estado_civil": "CASADO/A",
                                    "fecha_nacimiento": "1957-02-22",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                },
                                {
                                    "codigo_familiar_contrayente": 12,
                                    "codigo_contrayente": 3,
                                    "tipo_familiar": 1,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "8261410",
                                    "dv_numero_identificacion": "9",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "CLAUDINA FLOR",
                                    "apellido_uno": "SANTANDER",
                                    "apellido_dos": "RIQUELME",
                                    "genero": "FEMENINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "TALCAHUANO",
                                    "estado_civil": "CASADO/A",
                                    "fecha_nacimiento": "1958-10-20",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                }
                            ],
                            "hijos": [
                                {
                                    "codigo_familiar_contrayente": 8,
                                    "codigo_contrayente": 3,
                                    "tipo_familiar": 2,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "21041036",
                                    "dv_numero_identificacion": "8",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "JAVIERA CRISTINA",
                                    "apellido_uno": "AGUILERA",
                                    "apellido_dos": "OJEDA",
                                    "genero": "FEMENINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "CONCEPCIÓN",
                                    "estado_civil": "SOLTERO/A",
                                    "fecha_nacimiento": "2002-06-14",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                },
                                {
                                    "codigo_familiar_contrayente": 9,
                                    "codigo_contrayente": 3,
                                    "tipo_familiar": 2,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "21823285",
                                    "dv_numero_identificacion": "K",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "JOSÉ MIGUEL",
                                    "apellido_uno": "AGUILERA",
                                    "apellido_dos": "OJEDA",
                                    "genero": "MASCULINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "CONCEPCIÓN",
                                    "estado_civil": "SOLTERO/A",
                                    "fecha_nacimiento": "2005-04-21",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                },
                                {
                                    "codigo_familiar_contrayente": 10,
                                    "codigo_contrayente": 3,
                                    "tipo_familiar": 2,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "22350076",
                                    "dv_numero_identificacion": "5",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "VALENTINA IGNACIA",
                                    "apellido_uno": "AGUILERA",
                                    "apellido_dos": "OJEDA",
                                    "genero": "FEMENINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "RECOLETA",
                                    "estado_civil": "SOLTERO/A",
                                    "fecha_nacimiento": "2007-03-14",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:47.000Z",
                                    "estado": 1
                                }
                            ]
                        },
                        {
                            "codigo_contrayente": 4,
                            "tipo_identificacion": "r",
                            "numero_identificacion": "18100002",
                            "dv_numero_identificacion": "3",
                            "numero_documento": "U2FsdGVkX18388Wttn6HGimK2KD0HjjhaHmNv8xCDQkMl",
                            "nombre": "MAGDALENA ALEJANDRA",
                            "apellido_uno": "SEGUEL",
                            "apellido_dos": "PARRAGUEZ",
                            "pais_identificacion": "CHILE",
                            "nacionalidad": "CHILENA",
                            "genero": "FEMENINO",
                            "correo": "contrayente_dos@gmail.com",
                            "telefono": "56912346578",
                            "fecha_ingreso": "2022-02-26T15:52:19.000Z",
                            "calle_nombre": "PASAJE  LAURA DEL PINO",
                            "calle_numero": "714",
                            "calle_letra": "",
                            "resto_domicilio": "VILLA LOS PROFESORES",
                            "codigo_postal": "",
                            "fecha_nacimiento": "1992-01-09",
                            "contrayente_consentimiento": [
                                {
                                    "codigo_contrayente_consentimiento": 11,
                                    "codigo_contrayente": 12,
                                    "codigo_solicitud": 18,
                                    "nombres": "ROBERTO",
                                    "apellido_uno": "GONZÁLEZ",
                                    "apellido_dos": "REBOLLEDO",
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "pais_identificacion": "VENEZUELA",
                                    "nacionalidad": "VENEZOLANA",
                                    "calidad_consentimiento": "HERMANO",
                                    "fecha_ingreso": "2022-03-03T15:30:04.000Z",
                                    "fecha_modificacion": "2022-03-03T15:30:04.000Z",
                                    "estado": 1
                                },
                                {
                                    "codigo_contrayente_consentimiento": 12,
                                    "codigo_contrayente": 12,
                                    "codigo_solicitud": 18,
                                    "nombres": "MARIO",
                                    "apellido_uno": "GONZÁLEZ",
                                    "apellido_dos": "VEGA",
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "pais_identificacion": "VENEZUELA",
                                    "nacionalidad": "VENEZOLANA",
                                    "calidad_consentimiento": "PADRE",
                                    "fecha_ingreso": "2022-03-03T15:30:04.000Z",
                                    "fecha_modificacion": "2022-03-03T15:30:04.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_estadistica": [
                                {
                                    "codigo_dato_estadistico": 4,
                                    "codigo_contrayente": 4,
                                    "nombre_calle": null,
                                    "numero_calle": null,
                                    "localidad": null,
                                    "codigo_comuna": null,
                                    "num_matrimonios_anteriores": 0,
                                    "causa_disolucion_ultimo_matrimonio": "NO APLICA",
                                    "edad": 30,
                                    "ultimo_curso": null,
                                    "nivel": null,
                                    "ocupacion": "SIN PROFESIÓN INFORMADA",
                                    "nivel_ocupacional": null,
                                    "fecha_ingreso": "2022-02-27T00:32:48.000Z",
                                    "fecha_modificacion": "2022-02-27T00:32:48.000Z",
                                    "estado": 1
                                }
                            ],
                            "datos_contrayente_matrimonios": [
                                {
                                    "codigo_matrimonio_contrayente": 4,
                                    "codigo_contrayente": 4,
                                    "tipo_identificacion": "p",
                                    "numero_identificacion": "123456789",
                                    "dv_numero_identificacion": "P",
                                    "pais_identificacion": null,
                                    "nacionalidad": null,
                                    "nombres": "MANUEL",
                                    "apellido_uno": "RINCÓN",
                                    "apellido_dos": "ROMERO",
                                    "genero": null,
                                    "profesion": null,
                                    "estado_civil": null,
                                    "fecha_nacimiento": null,
                                    "fecha_matrimonio": null,
                                    "anio_matrimonio": null,
                                    "motivo": "ANULACIÓN",
                                    "lugar_defuncion": "",
                                    "fecha_defuncion": "0000-00-00",
                                    "circunscripcion": "",
                                    "numero": "",
                                    "registro": "",
                                    "tribunal": "",
                                    "causa_rol": "",
                                    "fecha_instancia_uno": "0000-00-00",
                                    "fecha_instancia_dos": "0000-00-00",
                                    "fecha_anulacion": "2022-02-16",
                                    "fecha_ingreso": "2022-02-28T15:01:37.000Z",
                                    "estado": 1
                                }
                            ],
                            "contrayente_curadores": [],
                            "contrayente_interpretes": [],
                            "contrayente_comuna": {
                                "nombre_comuna": "Los Angeles"
                            },
                            "contrayente_region": {
                                "nombre_region": "Region Del Bio Bio"
                            },
                            "padres": [
                                {
                                    "codigo_familiar_contrayente": 13,
                                    "codigo_contrayente": 4,
                                    "tipo_familiar": 1,
                                    "tipo_identificacion": "r",
                                    "numero_identificacion": "8192554",
                                    "dv_numero_identificacion": "2",
                                    "pais_identificacion": "CHILE",
                                    "nacionalidad": "CHILENA",
                                    "nombres": "MARÍA CRISTINA",
                                    "apellido_uno": "PARRAGUEZ",
                                    "apellido_dos": "ROJAS",
                                    "genero": "FEMENINO",
                                    "profesion": "SIN PROFESIÓN INFORMADA",
                                    "circunscripcion": "TENO",
                                    "estado_civil": "CASADO/A",
                                    "fecha_nacimiento": "1957-09-17",
                                    "fecha_defuncion": "0000-00-00",
                                    "fecha_ingreso": "2022-02-27T00:32:48.000Z",
                                    "estado": 1
                                }
                            ],
                            "hijos": []
                        }
                    ],
                    "testigos": [
                        {
                            "codigo_testigo": 3,
                            "run": 18500001,
                            "dv_run": "K",
                            "numero_documento": "U2FsdGVkX1Por21Ld4xMl3Jk4AooYvlnK2aKFGmlMasDx",
                            "nombre": "JESSICA JAZMÍN",
                            "apellido_uno": "CLAUSSEN",
                            "apellido_dos": "CUADRA",
                            "nacionalidad": "CHILENA",
                            "genero": "FEMENINO",
                            "correo": "testigo_uno@gmail.com",
                            "telefono": "testigo_uno@gmail.com",
                            "fecha_nacimiento": "1994-02-05",
                            "calle_nombre": "REGIDOR LUIS MUÑOZ",
                            "calle_numero": "1643",
                            "calle_letra": "",
                            "resto_domicilio": "VILLA LOS CIPRESES",
                            "codigo_postal": "",
                            "testigo_comuna": {
                                "nombre_comuna": "La Pintana"
                            },
                            "testigo_region": {
                                "nombre_region": "Region Metropolitana De Santiago"
                            }
                        },
                        {
                            "codigo_testigo": 4,
                            "run": 18500014,
                            "dv_run": "1",
                            "numero_documento": "U2FsdGVkX18nJkmfcop64PfdOnPor21LdqzKBCQOjrd0p",
                            "nombre": "KARINA ANDREA",
                            "apellido_uno": "ARAYA",
                            "apellido_dos": "FUENTES",
                            "nacionalidad": "CHILENA",
                            "genero": "FEMENINO",
                            "correo": "testigo_dos@gmail.com",
                            "telefono": "testigo_dos@gmail.com",
                            "fecha_nacimiento": "1994-01-29",
                            "calle_nombre": "RIO DE CHILE",
                            "calle_numero": "13218",
                            "calle_letra": "",
                            "resto_domicilio": "",
                            "codigo_postal": "",
                            "testigo_comuna": {
                                "nombre_comuna": "Huechuraba"
                            },
                            "testigo_region": {
                                "nombre_region": "Region Metropolitana De Santiago"
                            }
                        }
                    ],
                    "gestiones":[
                        {
                            "codigo_solicitud_gestion": 2,
                            "codigo_solicitud": 5,
                            "codigo_oficial": 1,
                            "codigo_estado": 0,
                            "capitulacion": null,
                            "observacion_subinscripciones": null,
                            "observacion_hijos": null,
                            "curso_matrimonio_estado": "REALIZADO",
                            "curso_matrimonio_fecha": "2021-05-13",
                            "curso_matrimonio_lugar": "LUGAR 1",
                            "curso_matrimonio_num_certificado": "ASJ1O3",
                            "lugar_celebracion_ante": "OFICIAL CIVIL",
                            "lugar_celebracion_lugar": "OTRO",
                            "fecha_ingreso": "2022-03-03T20:54:31.000Z",
                            "fecha_modificacion": "2022-03-03T20:54:31.000Z"
                        }
                    ]
                }
            };

            let data = JSON.stringify(theObj);
            fetch("/api/certificado", {method:'POST',  headers: {'Content-Type': 'application/json'},  body: data })
            .then( (r) => r.json())
            .then( d => {
                
                let obj = document.querySelector("object");
                let link = document.querySelector("a");
                
                obj.setAttribute("data", "data:application/pdf;base64," + d.data.base64)
                link.setAttribute("href", "data:application/pdf;base64," + d.data.base64);
                link.setAttribute("download", "comprobante-agenda.pdf" );
            })
        })
    </script>
</body>
</html>